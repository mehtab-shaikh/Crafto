import{k as l,j as e,r as j,g as M}from"./index-BdNT52md.js";import{u as U,C as Q,T as w,I as E,D as P,F as $,a as z,c as B}from"./api-Dubz3QmR.js";import{r as n}from"./createSvgIcon-6PiJ_9Xz.js";import{a as L}from"./index-BDDZPjoZ.js";import{a as s,s as k}from"./toastUtil-BGvwUvts.js";import{B as O}from"./Box-ELrfV3J3.js";import{T as i}from"./Typography-BfnYBWhW.js";import{G as r}from"./Grid-CuOVNvKa.js";import{B as I}from"./Button-fwlHkQr7.js";import{I as b}from"./IconButton-BulbvmOV.js";import"./ButtonBase-j_30sl6c.js";import"./useTheme-Bzk-2L6r.js";import"./Grow-CEX3q8rk.js";import"./List-CwaCheS_.js";var u={},V=l;Object.defineProperty(u,"__esModule",{value:!0});var q=u.default=void 0,W=V(n()),H=e;q=u.default=(0,W.default)((0,H.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var c={},A=l;Object.defineProperty(c,"__esModule",{value:!0});var y=c.default=void 0,G=A(n()),N=e;y=c.default=(0,G.default)((0,N.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit");var d={},Y=l;Object.defineProperty(d,"__esModule",{value:!0});var _=d.default=void 0,J=Y(n()),K=e;_=d.default=(0,J.default)((0,K.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const me=()=>{const{handleSubmit:C,control:D,setValue:m,formState:{errors:p}}=U(),[x,g]=j.useState(""),[h,a]=j.useState(!1),F=M(),R=async o=>{try{a(!0),console.log("Uploading image...");const t=await z(o.quoteImage);if(console.log("Image response:",t),!t||!t.url){s("Failed to upload image. Please try again."),a(!1);return}const f=t.url;console.log("Creating quote with media URL:",f);const v=await B(o.quoteText,f);v&&v.success?(k("Quote created successfully!"),F("/")):s("Failed to create quote. Please try again.")}catch(t){console.error("Error in quote creation:",t),s(t.message||"Failed to create quote. Please try again.")}finally{a(!1)}},S=o=>{const t=o.target.files[0];t&&(g(URL.createObjectURL(t)),m("quoteImage",t))},T=()=>{g(""),m("quoteImage",""),document.getElementById("quoteImage").value=""};return e.jsxs(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",overflowY:"auto"},children:[e.jsx(i,{variant:"h4",sx:{mb:2,color:"#377D99",fontWeight:"bold"},children:"Create Quote"}),e.jsx("form",{onSubmit:C(R),noValidate:!0,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(Q,{name:"quoteText",control:D,rules:{required:"Quote text is required",maxLength:{value:200,message:"Quote text cannot exceed 200 characters"}},render:({field:o})=>{var t;return e.jsx(w,{...o,label:"Quote Text",variant:"outlined",size:"small",fullWidth:!0,multiline:!0,rows:4,error:!!p.quoteText,helperText:(t=p.quoteText)==null?void 0:t.message,InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(L,{size:24,style:{color:"#377D99"}})})}})}})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(P,{children:e.jsx(i,{sx:{color:"#377D99"},children:"Image Upload"})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs($,{sx:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"10px",border:"1px solid #ccc",padding:"20px",position:"relative"},children:[e.jsx("input",{type:"file",id:"quoteImage",accept:"image/*",style:{display:"none"},name:"quoteImage",onChange:S}),x?e.jsxs(e.Fragment,{children:[e.jsx(i,{component:"label",variant:"contained",htmlFor:"quoteImage",sx:{position:"absolute",left:"10px",top:"10px"},children:"Quote Image"}),e.jsx(b,{component:"label",variant:"contained",htmlFor:"quoteImage",sx:{position:"absolute",right:"30px",top:"0px"},children:e.jsx(y,{color:"primary"})}),e.jsx(b,{onClick:T,variant:"contained",sx:{position:"absolute",right:"0px",top:"0px"},children:e.jsx(_,{color:"error"})}),e.jsx("div",{children:e.jsx("img",{src:x,alt:"Preview",style:{objectFit:"cover",maxWidth:"100%",height:"200px"}})})]}):e.jsx("label",{htmlFor:"quoteImage",children:e.jsx(I,{sx:{backgroundColor:"#377D99"},component:"span",variant:"contained",startIcon:e.jsx(q,{}),children:"Upload Image"})})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(I,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{backgroundColor:"#377D99"},disabled:h,children:h?"Uploading...":"Submit Quote"})})]})})]})};export{me as default};
